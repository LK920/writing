# 엔티티와 DTO: 차이점과 DTO 사용 이유

## 1. 엔티티와 DTO의 정의

### 1.1 엔티티 (Entity)
- **정의**: 데이터베이스 테이블과 매핑되는 객체로, 비즈니스 로직이나 상태를 포함할 수 있음.
- **특징**:
  - 영속성 계층과 밀접하게 연결 (예: JPA `@Entity` 사용).
  - 도메인 모델로서 비즈니스 규칙을 캡슐화 가능 (예: `User` 객체에 `canReserve()` 메서드).
  - DB 스키마 변경에 직접적인 영향.

### 1.2 DTO (Data Transfer Object)
- **정의**: API나 계층 간 데이터 전송을 위한 단순 데이터 홀더.
- **특징**:
  - 비즈니스 로직이나 영속성 없이 데이터만 전달.
  - 프레젠테이션 계층(컨트롤러)과 클라이언트 간 계약 역할.
  - 필요에 따라 필터링된 데이터만 포함.

## 2. 엔티티와 DTO의 차이점
- **역할**:
  - 엔티티: 도메인 로직과 데이터 저장을 위한 객체.
  - DTO: 데이터 전송 전용, 로직 포함 X.
- **영속성**:
  - 엔티티: DB와 직접 연결, 영속성 관리 (예: Hibernate).
  - DTO: DB와 무관, 순수 데이터 구조.
- **구조**:
  - 엔티티: 복잡한 필드와 메서드 포함 가능.
  - DTO: 단순 필드와 getter/setter 중심.
- **사용 시나리오**:
  - 엔티티: 도메인 계층 내 로직 처리.
  - DTO: 외부 API 응답 또는 계층 간 데이터 교환.

## 3. DTO를 사용해야 하는 이유
당신의 이해("엔티티의 크리티컬한 데이터를 감추고, DB와의 연결성을 끊어서 데이터 전달만 하는 것")를 기반으로 구체적으로 정리했어.

### 3.1 보안과 캡슐화
- **설명**: 엔티티를 그대로 노출하면 민감한 데이터(예: 비밀번호, 내부 ID)가 외부에 노출될 위험 있음.
- **DTO 활용**: 필요한 정보만 필터링해 전달 (예: `UserDTO`에 `password` 제외).
- **효과**: 데이터 노출 최소화, 보안 강화.

### 3.2 계층 간 독립성 확보
- **설명**: 엔티티는 영속성 계층에 종속적이지만, DTO는 프레젠테이션 계층과 독립적.
- **DTO 활용**: DB 스키마 변경이 API 응답에 영향 주지 않음 (예: DB에 새 컬럼 추가 시 DTO 수정으로 대응).
- **효과**: 계층 간 결합도 낮춤, 유연성 증가.

### 3.3 성능 최적화
- **설명**: 엔티티 전체를 전송하면 불필요한 데이터 포함 가능.
- **DTO 활용**: 필요한 필드만 선택해 전송 (예: `OrderDTO`에 `orderId`, `total`만 포함).
- **효과**: 네트워크 부하 감소, 응답 시간 단축.

### 3.4 유지보수성과 확장성
- **설명**: 엔티티는 도메인 로직과 영속성에 초점, DTO는 API 요구사항에 맞춤.
- **DTO 활용**: API 변경 시 DTO만 수정, 엔티티 영향 최소화.
- **효과**: 장기적 유지보수 용이, 확장성 향상.

## 4. 당신의 이해와의 연관성
- **이해**: "엔티티의 크리티컬한 데이터를 감추고, DB와의 연결성을 끊어서 데이터 전달만 하는 것."
- **맞는 부분**: DTO는 민감 데이터를 숨기고(DB 연결 끊음), 순수 데이터 전달 역할.
- **보완점**: 단순 전달 외에 보안, 성능, 독립성 등 추가 이점 포함.
- **예시**:
  - 엔티티: `User(id=1, username="john", password="secret")`.
  - DTO: `UserDTO(id=1, username="john")` (password 제외).

## 5. 실무 적용 팁
- **초기 프로젝트**: 간단한 경우 엔티티를 DTO로 직접 사용 가능.
- **성숙 단계**: 프로젝트 커지면 MapStruct나 Lombok으로 엔티티-DTO 변환 자동화.
- **권장**: DTO를 통해 API 계약 명확히 정의, 엔티티는 도메인 로직에 집중.

## 6. 결론
DTO는 엔티티와 똑같아 보이더라도 역할과 목적이 달라. 크리티컬한 데이터 숨기기와 DB 연결 끊기가 기본이지만, 보안, 성능, 유지보수성 면에서 큰 이점을 제공해. 프로젝트 규모와 요구사항에 따라 적절히 활용하면 설계 안정성이 크게 높아질 거야.