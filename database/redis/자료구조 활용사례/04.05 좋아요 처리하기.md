---
aliases:
  - 레디스_카운팅
tags:
  - redis
  - 좋아요
  - like
  - counting
  - 카운팅
  - set
---
## Set을 이용한 좋아요 처리하기

댓글, 게시글 등에서 좋아요 기능을 구현할 때 좋아요 개수 카운팅과 중복 방지가 필요합니다.

### RDBMS의 한계

관계형 데이터베이스에서 좋아요 클릭 시:
- 특정 행에서 좋아요 개수 데이터를 증감하는 UPDATE 처리 필요
- DB에 읽기/쓰기 부하가 발생하여 성능에 직접적인 영향
- 동시성 제어 필요 (race condition 발생 가능)

### Redis Set을 이용한 구현

Set 자료구조의 특성을 활용하여 간단하고 효율적으로 구현할 수 있습니다.

#### 좋아요 추가
```redis
# 유저 345, 25, 967이 댓글 ID 12554에 좋아요를 누름
SADD comment-like:12554 345 25 967
```

#### 좋아요 개수 조회
```redis
# 댓글 ID 12554의 좋아요를 누른 유저 수 반환
SCARD comment-like:12554
# 결과: 3
```

#### 특정 유저의 좋아요 여부 확인
```redis
# 유저 345가 댓글 12554에 좋아요를 눌렀는지 확인
SISMEMBER comment-like:12554 345
# 결과: 1 (존재함) 또는 0 (존재하지 않음)
```

#### 좋아요 취소
```redis
# 유저 345가 좋아요 취소
SREM comment-like:12554 345
```

#### 좋아요를 누른 유저 목록 조회
```redis
# 댓글 12554에 좋아요를 누른 모든 유저 조회
SMEMBERS comment-like:12554
# 결과: 345, 25, 967
```

### 장점
- 중복 방지가 자동으로 처리됨 (같은 유저가 여러 번 좋아요 불가)
- 빠른 조회 및 업데이트 성능
- 좋아요를 누른 유저 목록을 쉽게 관리